<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>LeetCode Weekly Contest 76 | 笔记仓库</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="说个好消息，这个域名我又续费了一年好在有优惠码所以省了顿饭钱啦hhhh但还是肉疼，所以我还得再写一年呢。另外我还开了个微信公众号搬运和分享我的内容，直接搜索yangzhou-301或者扫二维码。顺便在这里打广告招收编辑和创作者，我要更专注的学习和生产内容嘛。  好吧，废话完了直接看这周的题吧。 https://leet">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode Weekly Contest 76">
<meta property="og:url" content="notebook.xyli.me/LeetCode/LeetCode-Weekly-Contest-76/index.html">
<meta property="og:site_name" content="笔记仓库">
<meta property="og:description" content="说个好消息，这个域名我又续费了一年好在有优惠码所以省了顿饭钱啦hhhh但还是肉疼，所以我还得再写一年呢。另外我还开了个微信公众号搬运和分享我的内容，直接搜索yangzhou-301或者扫二维码。顺便在这里打广告招收编辑和创作者，我要更专注的学习和生产内容嘛。  好吧，废话完了直接看这周的题吧。 https://leetcode.com/contest/weekly-contest-76/">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://github.com/Lixinyi-DUT/Project-Yangzhou/raw/master/notebook/LeetCode/qrcode_for_yangzhou_301.jpg">
<meta property="og:image" content="https://s3-lc-upload.s3.amazonaws.com/uploads/2018/03/17/picture1.png">
<meta property="og:updated_time" content="2018-03-25T15:18:19.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeetCode Weekly Contest 76">
<meta name="twitter:description" content="说个好消息，这个域名我又续费了一年好在有优惠码所以省了顿饭钱啦hhhh但还是肉疼，所以我还得再写一年呢。另外我还开了个微信公众号搬运和分享我的内容，直接搜索yangzhou-301或者扫二维码。顺便在这里打广告招收编辑和创作者，我要更专注的学习和生产内容嘛。  好吧，废话完了直接看这周的题吧。 https://leetcode.com/contest/weekly-contest-76/">
<meta name="twitter:image" content="https://github.com/Lixinyi-DUT/Project-Yangzhou/raw/master/notebook/LeetCode/qrcode_for_yangzhou_301.jpg">
<meta name="twitter:creator" content="@yangzhou301">
  
    <link rel="alternate" href="/atom.xml" title="笔记仓库" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83527033-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?2215e0ea4875ead3c44e8c3e379722a4";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">笔记仓库</h1>
  
    <p class="lead blog-description">正常人的正常笔记集</p>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-LeetCode-Weekly-Contest-76" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      LeetCode Weekly Contest 76
    </h1>
  


    <meta name="ujianVerification" content="542ffd85bb968154b1190d5d92d59cef" />
  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/LeetCode/LeetCode-Weekly-Contest-76/" class="article-date"><time datetime="2018-03-18T13:51:31.062Z" itemprop="datePublished">2018-03-18</time></a>
</div>

    <div class="article-author">Xinyi Li</div>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>说个好消息，这个域名我又续费了一年<del>好在有优惠码所以省了顿饭钱啦hhhh但还是肉疼</del>，所以我还得再写一年呢。另外我还开了个微信公众号搬运和分享我的内容，直接搜索<code>yangzhou-301</code>或者扫二维码。顺便在这里打广告招收编辑和创作者，我要更专注的学习和生产内容嘛。</p>
<p><img src="https://github.com/Lixinyi-DUT/Project-Yangzhou/raw/master/notebook/LeetCode/qrcode_for_yangzhou_301.jpg" alt="扬州计划"></p>
<p>好吧，废话完了直接看这周的题吧。</p>
<p><a href="https://leetcode.com/contest/weekly-contest-76/" target="_blank" rel="noopener">https://leetcode.com/contest/weekly-contest-76/</a></p>
<a id="more"></a>
<h2 id="Similar-RGB-Color"><a href="#Similar-RGB-Color" class="headerlink" title="Similar RGB Color"></a>Similar RGB Color</h2><blockquote>
<p>In the following, every capital letter represents some hexadecimal digit from <code>0</code> to <code>f</code>.</p>
<p>The red-green-blue color <code>&quot;#AABBCC&quot;</code> can be written as <code>&quot;#ABC&quot;</code> in shorthand.  For example, <code>&quot;#15c&quot;</code> is shorthand for the color <code>&quot;#1155cc&quot;</code>.</p>
<p>Now, say the similarity between two colors <code>&quot;#ABCDEF&quot;</code> and <code>&quot;#UVWXYZ&quot;</code> is <code>-(AB - UV)^2 - (CD - WX)^2 - (EF - YZ)^2</code>.</p>
<p>Given the color <code>&quot;#ABCDEF&quot;</code>, return a 7 character color that is most similar to <code>#ABCDEF</code>, and has a shorthand (that is, it can be represented as some <code>&quot;#XYZ&quot;</code></p>
<p><strong>Example 1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: color = &quot;#09f166&quot;</span><br><span class="line">Output: &quot;#11ee66&quot;</span><br><span class="line">Explanation:  </span><br><span class="line">The similarity is -(0x09 - 0x11)^2 -(0xf1 - 0xee)^2 - (0x66 - 0x66)^2 = -64 -9 -0 = -73.</span><br><span class="line">This is the highest among any shorthand color.</span><br></pre></td></tr></table></figure></p>
<p><strong>Note</strong>:</p>
<ol>
<li><code>color</code> is a string of length <code>7</code>.</li>
<li><code>color</code>is a valid RGB color: for <code>i &gt; 0</code>, <code>color[i]</code> is a hexadecimal digit from <code>0</code> to <code>f</code></li>
<li>Any answer which has the same (highest) similarity as the best answer will be accepted.</li>
<li>All inputs and outputs should use lowercase letters, and the output is 7 characters.</li>
</ol>
</blockquote>
<p>可以缩写的形式要求三个颜色的数值都是17的整数倍，那么找距离每个颜色最近的在<code>[0,255]</code>范围内的<code>17*n</code>即可，这里是用模17的余数判断：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">similarRGB</span><span class="params">(self, color)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type color: str</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res=<span class="string">'#'</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>,<span class="number">2</span>):</span><br><span class="line">            c=int(color[i:i+<span class="number">2</span>],<span class="number">16</span>)</span><br><span class="line">            r=c%<span class="number">17</span></span><br><span class="line">            <span class="keyword">if</span> r&lt;=<span class="number">8</span>:</span><br><span class="line">                res+=hex(max(<span class="number">0</span>,c-r))[<span class="number">2</span>:].zfill(<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res+=hex(min(<span class="number">17</span>*<span class="number">15</span>,c-r+<span class="number">17</span>))[<span class="number">2</span>:]</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<h2 id="Minimum-Swaps-To-Make-Sequences-Increasing"><a href="#Minimum-Swaps-To-Make-Sequences-Increasing" class="headerlink" title="Minimum Swaps To Make Sequences Increasing"></a>Minimum Swaps To Make Sequences Increasing</h2><p>原题地址 <a href="https://leetcode.com/contest/weekly-contest-76/problems/minimum-swaps-to-make-sequences-increasing/" target="_blank" rel="noopener">https://leetcode.com/contest/weekly-contest-76/problems/minimum-swaps-to-make-sequences-increasing/</a></p>
<blockquote>
<p>We have two integer sequences <code>A</code> and <code>B</code> of the same non-zero length.</p>
<p>We are allowed to swap elements <code>A[i]</code> and <code>B[i]</code>.  Note that both elements are in the same index position in their respective sequences.</p>
<p>At the end of some number of swaps, <code>A</code> and <code>B</code> are both strictly increasing.  (A sequence is strictly increasing if and only if <code>A[0] &lt; A[1] &lt; A[2] &lt; ... &lt; A[A.length - 1]</code>.)</p>
<p>Given A and B, return the minimum number of swaps to make both sequences strictly increasing.  It is guaranteed that the given input always makes it possible.</p>
<p><strong>Example</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: A = [1,3,5,4], B = [1,2,3,7]</span><br><span class="line">Output: 1</span><br><span class="line">Explanation:</span><br><span class="line">Swap A[3] and B[3].  Then the sequences are:</span><br><span class="line">A = [1, 3, 5, 7] and B = [1, 2, 3, 4]</span><br><span class="line">which are both strictly increasing.</span><br></pre></td></tr></table></figure></p>
<p><strong>Note</strong>:</p>
<ol>
<li><code>A, B</code> are arrays with the same length, and that length will be in the range <code>[1, 1000]</code>.</li>
<li><code>A[i], B[i]</code> are integer values in the range <code>[0, 2000]</code>.</li>
</ol>
</blockquote>
<p>在进行一轮线性扫描时，决定是否交换<code>A</code>和<code>B</code>的元素取决于<code>A[i]</code>,<code>A[i+1]</code>,<code>B[i]</code>和<code>B[i+1]</code>之间的关系，分开讨论<code>A[i]&amp;B[i]</code>是否交换，对<code>A[i+1]&amp;B[i+1]</code>是否需要交换及代价的影响，这样的思路很适合考虑动态规划。在动态规划的逻辑上清晰的解释可以见<a href="https://leetcode.com/articles/minimum-swaps-to-make-sequences-increasing/" target="_blank" rel="noopener">官方题解</a>和<a href="https://t.co/5Tjz0p69Ve" target="_blank" rel="noopener">Python 14-line O(1) space O(n) time DP solution</a>，简要的来说参见我的代码：</p>
<ul>
<li><code>pre_swap</code>:<code>A[i]</code>和<code>B[i]</code>交换使得到<code>A[0-i]</code>和<code>B[0-i]</code>递增的代价</li>
<li><code>pre_unswap</code>:<code>A[i]</code>和<code>B[i]</code>不交换使得到<code>A[0-i]</code>和<code>B[0-i]</code>递增的代价</li>
<li><code>cur_swap</code>:<code>A[i+1]</code>和<code>B[i+1]</code>交换使得到<code>A[0-i+1]</code>和<code>B[0-i+1]</code>递增的代价</li>
<li><code>cur_unswap</code>:<code>A[i+1]</code>和<code>B[i+1]</code>不交换使得到<code>A[0-i+1]</code>和<code>B[0-i+1]</code>递增的代价</li>
</ul>
<p>当<code>A[i+1]&gt;A[i]</code>且<code>B[i+1]&gt;B[i]</code>时，要保证数组的<code>0-i+1</code>位递增，要么第<code>i</code>和<code>i+1</code>位都进行交换，要么都不进行交换，那么<code>cur_unswap=min(cur_unswap,pre_unswap)</code>而<code>cur_swap=min(cur_swap,pre_swap+1)</code></p>
<p>当<code>A[i+1]&gt;B[i]</code>且<code>B[i+1]&gt;A[i]</code>时（注意这个情况可以和上面同时存在，所以只是在原来的基础上再增加一种缩小代价的可能性），要保证数组的<code>0-i+1</code>位递增，可以只换<code>i</code>和<code>i+1</code>其中的一组，如果换的是<code>i</code>那么<code>i+1</code>不换所以有<code>cur_unswap=min(cur_unswap,pre_swap)</code>，反之如果换的是<code>i+1</code>而保持<code>i</code>不变则有<code>cur_swap=min(cur_swap,pre_unswap+1)</code></p>
<p>而每个<code>cur_swap</code>的最大值为数组<code>0-i+1</code>的长度<code>i+2</code>，<code>cur_unswap</code>的最大值为数组<code>0-i</code>的长度<code>i+1</code></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSwap</span><span class="params">(self, A, B)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type A: List[int]</span></span><br><span class="line"><span class="string">        :type B: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        pre_swap,pre_unswap=<span class="number">1</span>,<span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(A)<span class="number">-1</span>):</span><br><span class="line">            cur_swap,cur_unswap=i+<span class="number">2</span>,i+<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> A[i]&lt;A[i+<span class="number">1</span>] <span class="keyword">and</span> B[i]&lt;B[i+<span class="number">1</span>]:</span><br><span class="line">                cur_swap=min(cur_swap,pre_swap+<span class="number">1</span>)</span><br><span class="line">                cur_unswap=min(cur_unswap,pre_unswap)</span><br><span class="line">            <span class="keyword">if</span> A[i]&lt;B[i+<span class="number">1</span>] <span class="keyword">and</span> B[i]&lt;A[i+<span class="number">1</span>]:</span><br><span class="line">                cur_swap=min(cur_swap,pre_unswap+<span class="number">1</span>)</span><br><span class="line">                cur_unswap=min(cur_unswap,pre_swap)</span><br><span class="line">            pre_swap,pre_unswap=cur_swap,cur_unswap</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min(pre_swap,pre_unswap)</span><br></pre></td></tr></table></figure>
<p>时间复杂度为$o(n)$，空间复杂度为$o(1)$</p>
<h2 id="Find-Eventual-Safe-States"><a href="#Find-Eventual-Safe-States" class="headerlink" title="Find Eventual Safe States"></a>Find Eventual Safe States</h2><p>原题地址 <a href="https://leetcode.com/contest/weekly-contest-76/problems/find-eventual-safe-states/" target="_blank" rel="noopener">https://leetcode.com/contest/weekly-contest-76/problems/find-eventual-safe-states/</a></p>
<blockquote>
<p>n a directed graph, we start at some node and every turn, walk along a directed edge of the graph.  If we reach a node that is terminal (that is, it has no outgoing directed edges), we stop.</p>
<p>Now, say our starting node is eventually safe if and only if we must eventually walk to a terminal node.  More specifically, there exists a natural number <code>K</code> so that for any choice of where to walk, we must have stopped at a terminal node in less than <code>K</code> steps.</p>
<p>Which nodes are eventually safe?  Return them as an array in sorted order.</p>
<p>The directed graph has <code>N</code> nodes with labels <code>0, 1, ..., N-1</code>, where <code>N</code> is the length of <code>graph</code>.  The graph is given in the following form: <code>graph[i]</code> is a list of labels <code>j</code> such that <code>(i, j)</code> is a directed edge of the graph.</p>
<p><strong>Example</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: graph = [[1,2],[2,3],[5],[0],[5],[],[]]</span><br><span class="line">Output: [2,4,5,6]</span><br><span class="line">Here is a diagram of the above graph.</span><br></pre></td></tr></table></figure></p>
<p><img src="https://s3-lc-upload.s3.amazonaws.com/uploads/2018/03/17/picture1.png" alt=""></p>
<p><strong>Note</strong>:</p>
<ol>
<li><code>graph</code> will have length at most <code>10000</code>.</li>
<li>The number of edges in the graph will not exceed <code>32000</code>.</li>
<li>Each <code>graph[i]</code> will be a sorted list of different integers, chosen within the range <code>[0, graph.length - 1]</code>.</li>
</ol>
</blockquote>
<p>无非就是保证从这个结点出发不会进入回路。可以试试找回路常用的拓扑排序法，从出度为0的结点开始删去结点与其所有入边，循环操作至不存在出度为0的结点，删去的所有结点都是安全的。为了找到所有入边可以一开始对邻接表进行逆转操作，记录每个结点的所有入边，这样在删去入边时会高效一些。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eventualSafeNodes</span><span class="params">(self, graph)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type graph: List[List[int]]</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res=[i <span class="keyword">for</span> (i,e) <span class="keyword">in</span> enumerate(graph) <span class="keyword">if</span> <span class="keyword">not</span> e]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> res:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        in_edges=[[] <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(graph))]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i,edges <span class="keyword">in</span> enumerate(graph):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> edges:</span><br><span class="line">                in_edges[j].append(i)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> res:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> in_edges[node]:</span><br><span class="line">                graph[i].remove(node)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> graph[i]:</span><br><span class="line">                    res.append(i)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sorted(res)</span><br></pre></td></tr></table></figure>
<p>时间复杂度为$o(N+E)$，空间复杂度为$o(N)$，其中$N$为结点数，$E$为边数</p>
<h2 id="Bricks-Falling-When-Hit"><a href="#Bricks-Falling-When-Hit" class="headerlink" title="Bricks Falling When Hit"></a>Bricks Falling When Hit</h2><p>原题地址 <a href="https://leetcode.com/contest/weekly-contest-76/problems/bricks-falling-when-hit/" target="_blank" rel="noopener">https://leetcode.com/contest/weekly-contest-76/problems/bricks-falling-when-hit/</a></p>
<blockquote>
<p>We have a grid of 1s and 0s; the 1s in a cell represent bricks.  A brick will not drop if and only if it is directly connected to the top of the grid, or at least one of its (4-way) adjacent bricks will not drop.</p>
<p>We will do some erasures sequentially. Each time we want to do the erasure at the location (i, j), the brick (if it exists) on that location will disappear, and then some other bricks may drop because of that erasure.</p>
<p>Return an array representing the number of bricks that will drop after each erasure in sequence.</p>
<p><strong>Example 1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">grid = [[1,0,0,0],[1,1,1,0]]</span><br><span class="line">hits = [[1,0]]</span><br><span class="line">Output: [2]</span><br><span class="line">Explanation:</span><br><span class="line">If we erase the brick at (1, 0), the brick at (1, 1) and (1, 2) will drop. So we should return 2.</span><br></pre></td></tr></table></figure></p>
<p><strong>Example 2</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">grid = [[1,0,0,0],[1,1,0,0]]</span><br><span class="line">hits = [[1,1],[1,0]]</span><br><span class="line">Output: [0,0]</span><br><span class="line">Explanation:</span><br><span class="line">When we erase the brick at (1, 0), the brick at (1, 1) has already disappeared due to the last move. So each erasure will cause no bricks dropping.  Note that the erased brick (1, 0) will not be counted as a dropped brick.</span><br></pre></td></tr></table></figure></p>
<p><strong>Note</strong>:</p>
<ol>
<li>The number of rows and columns in the grid will be in the range [1, 200].</li>
<li>The number of erasures will not exceed the area of the grid.</li>
<li>It is guaranteed that each erasure will be different from any other erasure, and located inside the grid.<br>An erasure may refer to a location with no brick - if it does, no bricks drop.</li>
</ol>
</blockquote>
<p>首先需要理解一下题意，不会掉下来的砖是指第0层的砖（天花板）和与第0层砖连通的砖块。可以说只有有结点在第0层的连通分支中的砖块可以保留，其他砖块都会掉落。正向地去考虑删去每块砖可能不容易，那么可以像<a href="https://leetcode.com/problems/bricks-falling-when-hit/discuss/119829/Python-Solution-by-reversely-adding-hits-bricks-back" target="_blank" rel="noopener">这里</a>提到的思路，逆向的去添加<code>hits</code>中的砖块，看看每次添加可以让<code>grid</code>增加多少砖块。这样一来，可以从增加的<code>hit</code>出发进行DFS更容易找出有多少砖块通过这块砖被连接到了“天花板”。</p>
<p>我们先去掉<code>hits</code>中所有的砖块（指定位置为空的标记为<code>-1</code>，在之后重新添加的过程中这个<code>hit</code>对应的结果直接返回0），再从天花板开始做DFS，找到所有不会掉落的砖块并进行标记，再从后往前依次添加<code>hits</code>中的砖块，并以当前添加的这个砖块为根结点做DFS找到新的不会掉落的砖块数量，就是这次<code>hit</code>的对应掉落砖块数，即返回结果。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hitBricks</span><span class="params">(self, grid, hits)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type grid: List[List[int]]</span></span><br><span class="line"><span class="string">        :type hits: List[List[int]]</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        adj=[(<span class="number">-1</span>,<span class="number">0</span>),(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">-1</span>),(<span class="number">0</span>,<span class="number">1</span>)]</span><br><span class="line">        m,n=len(grid),len(grid[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(i,j)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span>&lt;=i&lt;m <span class="keyword">and</span> <span class="number">0</span>&lt;=j&lt;n <span class="keyword">and</span> grid[i][j]==<span class="number">1</span>:</span><br><span class="line">                grid[i][j]=<span class="number">2</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>+sum([dfs(i+dx,j+dy) <span class="keyword">for</span> (dx,dy) <span class="keyword">in</span> adj])</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">is_fixed</span><span class="params">(i,j)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> i==<span class="number">0</span> <span class="keyword">or</span> any([<span class="number">0</span>&lt;=i+dx&lt;m <span class="keyword">and</span> <span class="number">0</span>&lt;=j+dy&lt;n <span class="keyword">and</span> grid[i+dx][j+dy]==<span class="number">2</span> <span class="keyword">for</span> (dx,dy) <span class="keyword">in</span> adj])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i,j <span class="keyword">in</span> hits:</span><br><span class="line">            grid[i][j]-=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            dfs(<span class="number">0</span>,j)</span><br><span class="line"></span><br><span class="line">        res=[<span class="number">0</span>]*len(hits)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(len(hits)<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            i,j=hits[k]</span><br><span class="line">            grid[i][j]+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> grid[i][j]==<span class="number">1</span> <span class="keyword">and</span> is_fixed(i,j):</span><br><span class="line">                res[k]=dfs(i,j)<span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p>总共需要进行<code>o(m+len(hits))</code>次DFS</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="notebook.xyli.me/LeetCode/LeetCode-Weekly-Contest-76/" data-id="cjgi1qc9l001vnww32ki8xvx9" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      <!-- 
        <a href="#disqus_thread" class="article-comment-link">
        <i class="fa fa-comment"></i> Comments
        </a>
       -->
      

    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/LeetCode/LeetCode-Weekly-Contest-75/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">LeetCode Weekly Contest 75</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/LeetCode/LeetCode-Weekly-Contest-77/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">LeetCode Weekly Contest 77</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>


<!-- 
<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
 -->

  <div id="comments"></div>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script>
  var gitment = new Gitment({
    owner: 'Lixinyi-DUT',
    repo: 'TuQiang-Street-301',
    oauth: {
      client_id: '0a613b11d9140b2629e0',
      client_secret: 'b6ee57129a892f87bbac149167a90cf1a8035a47',
      id: post.name,
    },
  })
  gitment.render('comments')
  </script>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-toc">
    <h4>概览</h4>
    <ol class="sidebar-module-list"><li class="sidebar-module-list-item sidebar-module-list-level-2"><a class="sidebar-module-list-link" href="#Similar-RGB-Color"><span class="sidebar-module-list-number">1.</span> <span class="sidebar-module-list-text">Similar RGB Color</span></a></li><li class="sidebar-module-list-item sidebar-module-list-level-2"><a class="sidebar-module-list-link" href="#Minimum-Swaps-To-Make-Sequences-Increasing"><span class="sidebar-module-list-number">2.</span> <span class="sidebar-module-list-text">Minimum Swaps To Make Sequences Increasing</span></a></li><li class="sidebar-module-list-item sidebar-module-list-level-2"><a class="sidebar-module-list-link" href="#Find-Eventual-Safe-States"><span class="sidebar-module-list-number">3.</span> <span class="sidebar-module-list-text">Find Eventual Safe States</span></a></li><li class="sidebar-module-list-item sidebar-module-list-level-2"><a class="sidebar-module-list-link" href="#Bricks-Falling-When-Hit"><span class="sidebar-module-list-number">4.</span> <span class="sidebar-module-list-text">Bricks Falling When Hit</span></a></li></ol>
  </div>



  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>本站作者是失败人士，另一个博客已关闭详情见<a href="http://notebook.xyli.me/Introduction/broken-project-yangzhou/" style="text-decoration:none;">失败的扬州计划</a> 投稿或其他事项的交流可联系作者<em><a href="mailto:wolixinyi@gmail.com" style="text-decoration:none;"><i class="fa fa-envelope-o"></i>wolixinyi@gmail.com</a></em></p>
</div>


  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/CS161/">CS161</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Deutsche101/">Deutsche101</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Introduction/">Introduction</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/LeetCode/">LeetCode</a><span class="sidebar-module-list-count">21</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/SICP/">SICP</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module sidebar-tags">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/LaTeX/">LaTeX</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/函数式编程/">函数式编程</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/动态规划/">动态规划</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/失败/">失败</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/德语/">德语</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/规划问题/">规划问题</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/语种介绍/">语种介绍</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/贪心算法/">贪心算法</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/LaTeX/" style="font-size: 10px;">LaTeX</a> <a href="/tags/函数式编程/" style="font-size: 10px;">函数式编程</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/失败/" style="font-size: 10px;">失败</a> <a href="/tags/德语/" style="font-size: 10px;">德语</a> <a href="/tags/规划问题/" style="font-size: 10px;">规划问题</a> <a href="/tags/语种介绍/" style="font-size: 10px;">语种介绍</a> <a href="/tags/贪心算法/" style="font-size: 20px;">贪心算法</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/04/">四月 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/03/">三月 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/02/">二月 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/01/">一月 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">十二月 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/10/">十月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/08/">八月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">七月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">六月 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/09/">九月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/1990/05/">五月 1990</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module sidebar-recents">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/LeetCode/LeetCode-Weekly-Contest-81/">LeetCode Weekly Contest 81</a>
        </li>
      
        <li>
          <a href="/LeetCode/LeetCode-Weekly-Contest-80/">LeetCode Weekly Contest 80</a>
        </li>
      
        <li>
          <a href="/LeetCode/LeetCode-Weekly-Contest-79/">LeetCode Weekly Contest 79</a>
        </li>
      
        <li>
          <a href="/LeetCode/LeetCode-Weekly-Contest-78/">LeetCode Weekly Contest 78</a>
        </li>
      
        <li>
          <a href="/LeetCode/LeetCode-Weekly-Contest-77/">LeetCode Weekly Contest 77</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2018 Xinyi Li<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  
<script>
  var disqus_shortname = 'notebook-xyli-me';
  
  var disqus_url = 'notebook.xyli.me/LeetCode/LeetCode-Weekly-Contest-76/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/github.min.css" integrity="sha384-WtUWHyk39lfUpZQVgokNfSKCJaKAeD6adgLduBLrKTMUuPzFhLtL23y1guFy6lZn" crossorigin="anonymous">
  <script src="/highlight/highlight.pack.js"></script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
